<!--pages/cooking/cooking.wxml-->
<view class="container">
  <!-- 顶部标题和返回按钮 -->
  <view class="header">
    <button class="back-btn" bindtap="goBack">返回</button>
    <text class="page-title">自己下厨</text>
  </view>

  <!-- 顶部功能按钮 -->
  <view class="top-buttons">
    <button class="top-btn" bindtap="showRecipeBook">
      <text class="btn-text">食谱大全</text>
    </button>
    <button class="top-btn" bindtap="showTasteFilter">
      <text class="btn-text">口味筛选</text>
    </button>
  </view>

  <!-- 食谱显示区 -->
  <view class="recipe-section">
    <view class="recipe-card" wx:if="{{currentRecipe}}">
      <view class="recipe-header">
        <text class="recipe-title">{{currentRecipe.name}}</text>
        <view class="recipe-info">
          <view class="category-info">
            <text class="category-label">{{currentRecipe.category}}</text>
            <text class="subcategory-label">{{currentRecipe.subcategory}}</text>
          </view>
          <view class="recipe-tags">
            <text class="tag" wx:for="{{currentRecipe.tags}}" wx:key="index">{{item}}</text>
          </view>
          <view class="taste-info">
            <text class="taste-label">口味：</text>
            <text class="taste-value">{{currentRecipe.taste}}</text>
          </view>
        </view>
      </view>
      
      <view class="recipe-ingredients">
        <text class="section-title">所需原料：</text>
        <view class="ingredient-list">
          <view class="ingredient-item" wx:for="{{currentRecipe.ingredients}}" wx:key="name">
            <text class="ingredient-name">{{item.name}}</text>
            <text class="ingredient-amount">{{item.amount}}</text>
            <view class="availability {{item.available ? 'available' : 'unavailable'}}">
              <text class="status-text">{{item.available ? '✓' : '✗'}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <view class="recipe-seasonings">
        <text class="section-title">所需配料：</text>
        <view class="seasoning-list">
          <view class="seasoning-item" wx:for="{{currentRecipe.seasonings}}" wx:key="name">
            <text class="seasoning-name">{{item.name}}</text>
            <text class="seasoning-amount">{{item.amount}}</text>
          </view>
        </view>
      </view>
      
      <view class="recipe-steps">
        <text class="section-title">制作步骤：</text>
        <view class="step-list">
          <view class="step-item" wx:for="{{currentRecipe.steps}}" wx:key="index">
            <text class="step-number">{{index + 1}}.</text>
            <text class="step-text">{{item}}</text>
          </view>
        </view>
      </view>
      
      <view class="recipe-actions">
        <button class="action-btn cook-btn" bindtap="startCooking" disabled="{{!canCook}}">
          <text class="action-text">{{canCook ? '开始烹饪' : '原料不足'}}</text>
        </button>
        <button class="action-btn next-btn" bindtap="nextRecipe">
          <text class="action-text">下一个食谱</text>
        </button>
      </view>
    </view>
    
    <view class="no-recipe" wx:else>
      <text class="no-recipe-text">没有找到合适的食谱</text>
      <text class="no-recipe-hint">请检查仓库中的原料或调整筛选条件</text>
    </view>
  </view>
</view> 